<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro - NYR Festas</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header>
        <h1>NYR Festas</h1>
    </header>
    <nav>
        <ul>
            <li><a href="cadastro.html">Cadastro</a></li>
            <li><a href="index.html">Lista de Produtos</a></li>
            <li><a href="pedidos.html">Pedidos</a></li>
        </ul>
    </nav>
    <section class="pagina">
        <h2>Cadastro de Usuário</h2>
        <form id="cadastroForm" class="cadastro-form">
            <label for="representante">Representante:</label>
            <input type="text" id="representante" name="representante" placeholder="Nome do Representante" required>
            
            <label for="razaoSocial">Razão Social:</label>
            <input type="text" id="razaoSocial" name="razaoSocial" placeholder="Razão Social da empresa" required>
            
            <label for="cnpj">CNPJ:</label>
            <input type="text" id="cnpj" name="cnpj" placeholder="CNPJ da empresa" required>
            
            <label for="inscricaoEstadual">Inscrição Estadual:</label>
            <input type="text" id="inscricaoEstadual" name="inscricaoEstadual" placeholder="Inscrição Estadual da empresa" required>
            
            <label for="endereco">Endereço:</label>
            <input type="text" id="endereco" name="endereco" placeholder="Logradouro" required>
            
            <label for="cidade">Cidade:</label>
            <input type="text" id="cidade" name="cidade" placeholder="Cidade" required>
            
            <label for="estado">Estado:</label>
            <input type="text" id="estado" name="estado" placeholder="Estado" required>
            
            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" name="telefone" placeholder="Telefone" required>
            
            <label for="email">E-mail:</label>
            <input type="email" id="email" name="email" placeholder="E-mail" required>
            
            <button type="button" id="cadastroButton">Cadastrar</button>
        </form>
    </section>
    <script>
        document.getElementById('cadastroButton').addEventListener('click', async () => {
            const form = document.getElementById('cadastroForm');
            const formData = {
                representante: form.representante.value,
                razaoSocial: form.razaoSocial.value,
                cnpj: form.cnpj.value,
                inscricaoEstadual: form.inscricaoEstadual.value,
                endereco: form.endereco.value,
                cidade: form.cidade.value,
                estado: form.estado.value,
                telefone: form.telefone.value,
                email: form.email.value,
            };

            try {
                const response = await fetch('http://localhost/api/customers', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData),
                });

                if (response.ok) {
                    alert('Cadastro realizado com sucesso!');
                    form.reset();
                } else {
                    const errorData = await response.json();
                    alert(`Erro ao cadastrar: ${errorData.message}`);
                }
            } catch (error) {
                alert('Erro ao conectar ao servidor.');
                console.error(error);
            }
        });
    </script>
</body>
</html>
